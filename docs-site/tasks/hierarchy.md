---
title: 階層構造（親子関係）
description: タスクの階層構造、サブタスクの追加、インデント操作、タスクの移動について説明します。
---

# 階層構造（親子関係）

Ganttyでは、タスクを階層構造で管理できます。大きなタスクをサブタスク（子タスク）に分解することで、WBS（Work Breakdown Structure：作業分解構成図）を作成できます。

## 階層構造とは

階層構造とは、タスクを親タスクと子タスク（サブタスク）の関係で整理することです。

```
プロジェクト計画       ← 親タスク（レベル1）
├── 要件定義         ← 子タスク（レベル2）
│   ├── 要件収集     ← 孫タスク（レベル3）
│   └── 要件整理
├── 設計
│   ├── 基本設計
│   └── 詳細設計
└── 開発
    ├── 実装
    └── テスト
```

### 階層構造のメリット

- **作業の分解** - 大きなタスクを管理しやすい単位に分割できます
- **構造の明確化** - プロジェクト全体の構造が視覚的にわかります
- **進捗の集約** - 子タスクの進捗が親タスクに反映されます
- **日程の自動計算** - 親タスクの日程は子タスクから自動計算されます

## サブタスクの追加

既存のタスクにサブタスク（子タスク）を追加する方法です。

### ボタンから追加

1. 親となるタスクをクリックして選択します
2. 「**サブタスクを追加**」ボタンをクリックします
3. サブタスク名を入力します
4. **Enter** キーを押して確定します

サブタスクは親タスクの直下にインデントされて表示されます。

### キーボードショートカット

| 操作 | Windows / Linux | macOS |
|------|-----------------|-------|
| サブタスク追加 | `Ctrl + Shift + Enter` | `Cmd + Shift + Enter` |

### コンテキストメニューから追加

1. 親となるタスクを右クリックします
2. コンテキストメニューから「**サブタスクを追加**」を選択します

## インデント操作

既存のタスクをインデント（字下げ）またはアウトデント（字上げ）して、階層レベルを変更できます。

### インデント（子タスク化）

タスクをインデントすると、直上のタスクの子タスクになります。

**操作方法：**
1. インデントしたいタスクを選択します
2. **Tab** キーを押します

または、
- ツールバーの「**インデント**」ボタンをクリックします

**例：**
```
タスクA           インデント前
タスクB
     ↓
タスクA           インデント後
└── タスクB       ← タスクAの子タスクになった
```

### アウトデント（親レベルに移動）

タスクをアウトデントすると、親タスクと同じ階層レベルに移動します。

**操作方法：**
1. アウトデントしたいタスクを選択します
2. **Shift + Tab** キーを押します

または、
- ツールバーの「**アウトデント**」ボタンをクリックします

**例：**
```
タスクA           アウトデント前
└── タスクB
     ↓
タスクA           アウトデント後
タスクB           ← タスクAと同じレベルになった
```

::: info 補足
- 最上位のタスクはこれ以上アウトデントできません
- 直上にタスクがない場合はインデントできません
:::

## タスクの移動

ドラッグ&ドロップでタスクを別の場所に移動できます。

### 同じ階層内での移動

1. 移動したいタスクをドラッグします
2. 移動先の位置にドロップします

タスクの順序が変更されます。

### 別の親タスクへの移動

1. 移動したいタスクをドラッグします
2. 新しい親タスクの上にドロップします

ドロップ時のマウス位置によって、以下のように動作が変わります。

| ドロップ位置 | 動作 |
|------------|------|
| タスクの上端 | そのタスクの前に挿入 |
| タスクの中央 | そのタスクの子タスクになる |
| タスクの下端 | そのタスクの後に挿入 |

[ドラッグ&ドロップ操作について詳しく見る](/tasks/drag-drop)

### 複数タスクの一括移動

1. 移動したいタスクを複数選択します（`Ctrl` / `Cmd` + クリック）
2. 選択したタスクのいずれかをドラッグします
3. 移動先にドロップします

::: warning 注意
親タスクを移動すると、その子タスクも一緒に移動します。
:::

## 親タスクと子タスクの関係

親タスクと子タスクの間には、以下の関係があります。

### 日程の自動計算

親タスクの日程は、子タスクの日程から自動的に計算されます。

| 親タスクの項目 | 計算ルール |
|--------------|-----------|
| 開始日 | 子タスクの開始日の中で最も早い日付 |
| 終了日 | 子タスクの終了日の中で最も遅い日付 |
| 所要日数 | 開始日から終了日までの日数（自動計算） |

::: tip ポイント
子タスクを持つ親タスクでは、開始日・終了日・所要日数は自動計算されるため、手動で設定することはできません。
:::

[日程と所要日数について詳しく見る](/tasks/dates-duration)

### 進捗の集計

親タスクの進捗率は、子タスクの進捗率から自動計算されます。

- 子タスクの進捗率の平均値が親タスクの進捗率になります
- 重み付けは、所要日数に基づいて計算されます

[進捗管理について詳しく見る](/tasks/progress)

### 子タスクの折りたたみ

子タスクを持つ親タスクは、折りたたみ・展開ができます。

**折りたたみ：**
- 親タスクの左側にある「**-**」（マイナス）アイコンをクリックします
- 子タスクが非表示になります

**展開：**
- 親タスクの左側にある「**+**」（プラス）アイコンをクリックします
- 子タスクが表示されます

::: info 補足
折りたたんだ状態でも、子タスクはガントチャートビューで表示されます。リストビューでのみ折りたたみが適用されます。
:::

## 階層構造の制限

階層構造には以下の制限があります。

| 制限項目 | 値 |
|---------|-----|
| 最大階層の深さ | 制限なし（推奨は5階層まで） |
| 子タスクの最大数 | 制限なし |

::: tip ポイント
階層が深くなりすぎると管理が複雑になります。3〜5階層程度に抑えることをお勧めします。
:::

## WBSの作成例

プロジェクトの階層構造（WBS）の作成例を紹介します。

### ソフトウェア開発プロジェクト

```
Webアプリ開発プロジェクト
├── 1. 企画フェーズ
│   ├── 1.1 要件定義
│   │   ├── 1.1.1 ユーザーインタビュー
│   │   ├── 1.1.2 要件整理
│   │   └── 1.1.3 要件定義書作成
│   └── 1.2 仕様策定
│       ├── 1.2.1 機能仕様書作成
│       └── 1.2.2 画面仕様書作成
├── 2. 設計フェーズ
│   ├── 2.1 基本設計
│   └── 2.2 詳細設計
├── 3. 開発フェーズ
│   ├── 3.1 フロントエンド実装
│   ├── 3.2 バックエンド実装
│   └── 3.3 データベース構築
└── 4. テストフェーズ
    ├── 4.1 単体テスト
    ├── 4.2 結合テスト
    └── 4.3 総合テスト
```

### イベント企画

```
展示会出展プロジェクト
├── 事前準備
│   ├── 企画立案
│   ├── 予算確保
│   └── 申込手続き
├── 制作物準備
│   ├── ブースデザイン
│   ├── 配布資料作成
│   └── ノベルティ発注
├── 当日運営
│   ├── 設営
│   ├── 受付対応
│   └── 撤収
└── フォローアップ
    ├── リード整理
    └── お礼メール送付
```

## ベストプラクティス

階層構造を効果的に使うためのヒントです。

### 適切な粒度で分解する

- 最下層のタスクは「1人が1〜5日で完了できる作業」を目安に
- 抽象的すぎるタスクは具体的なサブタスクに分解する
- 細かすぎる場合は親タスクにまとめる

### 一貫した構造にする

- 同じ階層レベルのタスクは同じ粒度にする
- 命名規則を統一する（例：「〜する」で終わる）
- 番号を付けて順序を明確にする（任意）

## 次のステップ

- [ドラッグ&ドロップ操作](/tasks/drag-drop) - タスクの移動と並べ替え
- [日程と所要日数](/tasks/dates-duration) - 親タスクの日程自動計算
- [進捗管理](/tasks/progress) - 親タスクの進捗集計
